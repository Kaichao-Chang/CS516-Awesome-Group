{% extends "base.html" %}

{% block content %}

<h1>Order Fulfill</h1>

<form action="" method="post">
  {{ form.hidden_tag() }}
    <p>
      {{ form.ans.label }}<br/>
      <table class='table table-hover table-bordered container'>
        <thead class="thead-dark">
          <tr>
            <th scope="col">Product Name</th>
            <th scope="col">Total Amount</th>
            <th scope="col">Total Price</th>
            <th scope="col">Buyer Name</th>
            <th scope="col">Buyer Address</th>
            <th scope="col">Time Buyer Placed Order</th>
          </tr>
        </thead>
        <tbody>
          {% for avail in avail_history%}
            <tr>
              <th scope="row">{{avail.p_name}}</th>
              <td>{{avail.quantity}}</td>
              <td>{{avail.price}}</td>
              <td>{{avail.buyer_fname}} {{avail.buyer_lname}}</td>
              <td>{{avail.buyer_addr}}</td>
              <td>{{avail.time_purchased}}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      {{ form.ans(size=32) }}<br/>
      {% for error in form.ans.errors %}
      <span style="color: red;">[{{ error }}]</span>
      {% endfor %}
    </p>
    <p>
      {% with messages = get_flashed_messages() %}
      {% if messages %}
      <ul>
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
      </ul>
      {% endif %}
      {% endwith %}
    </p>
    <p>{{ form.submit() }}</p>
  <a class="btn btn-secondary" href="{{ url_for('index.index') }}" role="button">Back to main page</a>
</form>

{% endblock %}
